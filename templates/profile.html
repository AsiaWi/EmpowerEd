{% extends "base.html" %}
{% load static %}
{% block content %}

<div class="row">
    <div class="col-12 mb-5">
        <h1 class="text-center">User Profile</h1>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-12">
            <div class="row">
                {% if profile.user_id.role == 'Mentor' %}
                <div class="col-6">
                    <div class="user-profile mb-5">
                        <img src="{{ profile.userpic }}" alt="{{ profile }} profile picture">
                        <div class="container profile d-flex justify-content-between">
                            <p class="fw-semibold mt-3">{{ profile.user_id }}</p>
                            <!-- update icon -->
                            {% if profile.user_id == request.user %}
                            <a href="{% url 'home:update_profile' profile.user_id.pk %}" class="link-primary mx-2 pen"
                                title="Edit Your Profile">
                                <i class="fa-solid fa-pen-to-square"></i>
                            </a>{% endif %}
                        </div>
                        <a class="global-action-btn btn rounded-pill mt-3" href="#">contact mentor</a>
                    </div>
                    <p><strong>Area of Expertise:</strong> {{ profile.area_of_expertise }}</p>
                    <p><strong>Bio:</strong> {{ profile.bio }}</p>

                </div>
                <div class="col-6">
                    <p>Students:</p>
                    {% for relationship in mentor_student %}
                    <p><a
                            href="{% url 'home:profile' relationship.student_id.user_id.pk %}">{{ relationship.student_id }}</a>
                    </p>
                    {% endfor %}
                </div>

                {% elif profile.user_id.role == 'Student' %}
                <div class="col-10 col-md-5 mx-auto">
                    <div class="user-profile mb-5">
                        <img src="{{ profile.userpic }}" alt="{{ profile }} profile picture">
                        <div class="container profile d-flex justify-content-between">
                            <p class="fw-semibold">{{ profile }}</p>
                           {% if profile.user_id == request.user %}
                           <a href="{% url 'home:update_profile' profile.user_id.pk %}" class="link-primary mx-2 pen"
                               title="Edit Your Profile">
                               <i class="fa-solid fa-pen-to-square"></i>
                           </a>{% endif %}
                        </div>
                    </div>
                    <p>Parent: <a
                            href="{% url 'home:profile' student_parent.user_id.pk %}">{{ student_parent }}
                    </a>
                    </p>
                    <p>Age: {{ age }}</p>
                    <p>Interests: {{ profile.interests }}</p>

                </div>
                <div class="col-12 col-md-7">
                    <!--other informations-->
                    <div class="container sessions">
                        <p class="fs-5 fw-semibold text-center text-uppercase">Upcoming Sessions</p>
                        <div class="row">
                            {% for lesson in lessons %}
                            <div class="col-12">
                                <div class="container sessions-info my-2 py-2">
                                    <div class="d-flex justify-content-between">
                                        <p><a class="sessions-mentor" href="{% url 'home:profile' lesson.mentor.user_id.pk %}">{{ lesson.mentor.user_id }}</a></p>
                                        <p>{{ lesson.mentor.area_of_expertise }}</p>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>start: {{ lesson.start_time }}</small>
                                        <small>end: {{ lesson.end_time }}</small>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                {% else %}
                <div class="col-6">
                    <div class="user-profile mb-5">
                        <img src="{{ profile.userpic }}" alt=" {{ profile }}profile picture">
                        <div class="container profile d-flex justify-content-between">
                            <p class="fw-semibold">{{ profile }}</p>
                           {% if profile.user_id == request.user %}
                           <a href="{% url 'home:profile' profile.user_id.pk %}" class="link-primary mx-2 pen"
                               title="Edit Your Profile">
                               <i class="fa-solid fa-pen-to-square"></i>
                           </a>{% endif %}
                        </div>
                        <a class="global-action-btn btn rounded-pill mt-3" href="#">contact parent</a>
                    </div>
                    <p>Children:</p>
                    {% for relationship in parent_student %}
                    <p><a
                            href="{% url 'home:profile' relationship.user_id.pk %}">{{ relationship }}</a>
                    </p>
                    {% endfor %}
                    
                </div>
                <div class="col-6">
                    <!--other informations-->
                    <p>Upcoming Sessions: </p>
                    <!--sessions for parent-->
                </div>

                {% endif %}
            </div>
        </div>
    </div>
</div>

{% endblock %}